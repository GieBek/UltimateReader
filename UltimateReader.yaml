substitutions:
  name: "ultimatereader"
  friendly_name: "Ultimate Reader"

esphome:
  name: "${name}"
  friendly_name: "${friendly_name}"
  name_add_mac_suffix: true
  platformio_options:
    board_build.f_flash: 80000000L
    board_build.arduino.ldscript: esp32s3_out.ld
    board_build.arduino.partitions: default.csv
    board_build.arduino.memory_type: qio_qspi
  project:
    name: esphome.UltimateReader
    version: "1.2"


esp32:
  board: esp32-s3-devkitc-1
  variant: esp32s3
  framework:
    type: arduino

psram:

logger:
  id: component_logger
  level: DEBUG
  baud_rate: 115200

api:

ota:
  - platform: esphome

dashboard_import:
  package_import_url: github://wM-Bus/UltimateReader/UltimateReader.yaml@main
  import_full_config: true

external_components:
  - source: github://wM-Bus/UltimateReader@main
    refresh: 0d
    components: [ wmbus ]

wifi:
  ap:

captive_portal:

time:
  - platform: homeassistant

wmbus:
  all_drivers: True
  display_all: True
  sync_mode: True
  log_all: True

sensor:
  - platform: uptime
    type: seconds
    name: Ultimate Reader uptime

  - platform: wmbus
    meter_id: 0x12345678
    type: izar
    sensors:
      - name: "Sample total field in m3"
        display: True
        field: "total"
        accuracy_decimals: 3
        unit_of_measurement: "mÂ³"
        device_class: "water"
        state_class: "total_increasing"
        icon: "mdi:water"

text_sensor:
  - platform: wmbus
    meter_id: 0x12345678
    type: izar
    sensors:
      - name: "Sample text field"
        field: "current_alarms"
